<!DOCTYPE html>
<html lang="en">
<head>
  <!-- This does not have the problem with the first header having an odd scroll issue, but requires dattables 2, which breaks things. -->
  <meta charset="UTF-8">
  <title>DataTables FixedHeader & FixedColumns Example (AJAX)</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/2.3.4/css/dataTables.dataTables.min.css"/>
  <link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/4.0.1/css/fixedHeader.dataTables.min.css"/>
  <link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/5.0.0/css/fixedColumns.dataTables.min.css"/>
  <style>
    th, td { white-space: nowrap; }
    .dt-scroll-head::-webkit-scrollbar {
      -webkit-appearance: none;
      height: 10px;
      width: 1px;
    }
    .dt-scroll-head::-webkit-scrollbar-thumb {
      border-radius: 10px;
      background-color: rgba(0,0,0,.5);
      box-shadow: 0 0 1px rgba(255,255,255,.5);
    }
    /* To add a new scrollbar above table, try
    /* https://codepen.io/hellokatili/pen/yegxjP */
    /* and also add margin on left so it does not overlap fixed columns */
  </style>
</head>
<body>
  <h2>DataTables: FixedHeader &amp; FixedColumns Example (AJAX)</h2>
  <div id="container1" class="scroll-container" style="height:3em; overflow-x: auto;background: lightgrey; margin-bottom: 5px;">
    <div style="width:2022px; height:10px;"></div>
  </div>

  <table id="example" class="display nowrap" style="width:100%">
    <thead>
      <tr>
        <th>First name</th>
        <th>Last name</th>
        <th>Position</th>
        <th>Office</th>
        <th>Start date</th>
        <th>Salary</th>
        <th>Extn.</th>
        <th>E-mail</th>
        <th>First name2</th>
        <th>Last name2</th>
        <th>Position2</th>
        <th>Office2</th>
        <th>Start date2</th>
        <th>Salary2</th>
        <th>Extn.2</th>
        <th>E-mail2</th>
      </tr>
    </thead>
    <!-- No <tbody> needed, DataTables will populate it -->
  </table>

  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/2.3.4/js/dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/fixedheader/4.0.1/js/dataTables.fixedHeader.min.js"></script>
  <script src="https://cdn.datatables.net/fixedcolumns/5.0.0/js/dataTables.fixedColumns.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#example').DataTable({
        scrollX: true,
        scrollY: true,
        fixedHeader: true,
        fixedColumns: true,
        ajax: function(data, callback, settings) {
          // Simulate AJAX response
          data = [
              ["Tiger", "Nixon", "System Architect", "Edinburgh", "2011/04/25", "$320,800", "5421", "t.nixon@datatables.net"],
              ["Garrett", "Winters", "Accountant", "Tokyo", "2011/07/25", "$170,750", "8422", "g.winters@datatables.net"],
              ["Ashton", "Cox", "Junior Technical Author", "San Francisco", "2009/01/12", "$86,000", "1562", "a.cox@datatables.net"],
              ["Cedric", "Kelly", "Senior Javascript Developer", "Edinburgh", "2012/03/29", "$433,060", "6224", "c.kelly@datatables.net"],
              ["Airi", "Satou", "Accountant", "Tokyo", "2008/11/28", "$162,700", "5407", "a.satou@datatables.net"],
              ["Brielle", "Williamson", "Integration Specialist", "New York", "2012/12/02", "$372,000", "4804", "b.williamson@datatables.net"],
              ["Herrod", "Chandler", "Sales Assistant", "San Francisco", "2012/08/06", "$137,500", "9608", "h.chandler@datatables.net"],
              ["Rhona", "Davidson", "Integration Specialist", "Tokyo", "2010/10/14", "$327,900", "6200", "r.davidson@datatables.net"],
              ["Colleen", "Hurst", "Javascript Developer", "San Francisco", "2009/09/15", "$205,500", "2360", "c.hurst@datatables.net"],
              ["Sonya", "Frost", "Software Engineer", "Edinburgh", "2008/12/13", "$103,600", "1667", "s.frost@datatables.net"]
            ]
          for (let i=0; i<data.length; i++) {
            data[i] = data[i].concat(data[i]); // duplicate to make table wider
          }
          callback({data: data});
        },
        initComplete: function() {
          $('.dt-scroll-head')
            .css({'overflow-x':'scroll'})
            .on('scroll', function(e){
              var scrollBody = $(this).parent().find('.dt-scroll-body').get(0);
              scrollBody.scrollLeft = this.scrollLeft;
              $(scrollBody).trigger('scroll');
          });
        }
      });

      const container2 = $('.dt-scroll-head');
      $('#container1 div').width($('#example').width());
      container2.on('scroll', () => {
        console.log('scroll')
        $('#container1').scrollLeft(container2.scrollLeft());
      });
    });
  </script>
  <script>

  </script>
</body>
</html>